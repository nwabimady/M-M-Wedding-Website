(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();class p{constructor(e){this.allGuests=e,this.thanksDiv=document.getElementById("thanks"),this.otherDivs=document.querySelectorAll(".container:not(#thanks)"),this.addClickEventListener()}addClickEventListener(){const e=document.querySelectorAll("#rsvp-button");e.forEach(t=>{t.addEventListener("click",this.showThanks.bind(this))}),e.length===0&&console.log("rsvp-button not found.")}showThanks(){this.thanksDiv.style.display="block",this.otherDivs.forEach(e=>e.style.display="none")}}class f{constructor(e){this.allGuests=e}findChildrenForGuest(e){var n;const t=this.allGuests.find(s=>s.name.toLowerCase()===e.toLowerCase());return t?(((n=t.children)==null?void 0:n.split(" & "))||[]).map(o=>o.trim()):[]}showGuestChildrenInfo(e,t){const n=this.findChildrenForGuest(e),s=document.getElementById(t);s?n.length>0?(s.textContent=` ${n.join(", ")}`,s.style.display="block"):(s.textContent="This guest does not have any children registered.",s.style.display="block"):console.error(`Target element with ID "${t}" not found.`)}}const v=document.getElementById("guest-name"),C=document.getElementById("allDay"),E=document.getElementById("evening"),I=document.getElementById("ceremony");class L{constructor(e){this.allGuests=e,this.findChildren=new f(e)}verifyGuest(e){const t=this.allGuests.find(n=>n.name.toLowerCase()===e.toLowerCase());return console.log("Found Guest:",t),!!t}getGuestType(e){const t=this.allGuests.find(n=>n.name.toLowerCase()===e.toLowerCase());return t==null?void 0:t.type}getCeremonyAndEveningGuestType(e){const t=this.allGuests.find(n=>n.name.toLowerCase()===e.toLowerCase());return(t==null?void 0:t.type)||"Ceremony & Evening"}getCeremonyGuestType(e){const t=this.allGuests.find(n=>n.name.toLowerCase()===e.toLowerCase());return(t==null?void 0:t.type)||"Ceremony"}showGuestInfo(e){const t=document.getElementById("rsvp");t.style.display="none",this.hideAllGuestTypeDivs();const n=e==null?void 0:e.toLowerCase();if(n==="ceremony"?I.style.display="block":n==="evening"?E.style.display="block":n==="all day"?C.style.display="block":console.error("Guest data has invalid type:",e),document.querySelector(".container.block")){const o=v.value.trim();if(this.allGuests.find(r=>r.name.toLowerCase()===o.toLowerCase())){const r=this.findChildren.findChildrenForGuest(o),a=document.getElementById("children-checklist");a.style.display=r.length>0?"block":"none",this.findChildren.showGuestChildrenInfo(o,"children-names")}}}hideAllGuestTypeDivs(){const e=document.getElementById("allDay"),t=document.getElementById("evening"),n=document.getElementById("ceremony");e.style.display="none",t.style.display="none",n.style.display="none";const s=document.getElementById("children-checklist");s.style.display="none"}}class w{constructor(){this.guestNameInput=document.getElementById("guest-name"),this.rsvpListDiv=document.getElementById("rsvp-list"),this.rsvpDiv=document.getElementById("rsvp"),this.guestNameInput.addEventListener("keyup",this.handleGuestNameInput.bind(this))}handleGuestNameInput(e){e.target.value.trim()==="Admin"?(this.rsvpListDiv.style.display="block",this.rsvpDiv.style.display="none"):(this.rsvpListDiv.style.display="none",this.rsvpDiv.style.display="block")}async handleRsvp(){const e=this.guestNameInput.value.trim(),t=this.passwordInput.value.trim();if(e.toLowerCase()==="admin")if(await this.verifyAdmin(t)){this.showRsvpManager();return}else{alert("Invalid password for admin login.");return}}async verifyAdmin(e){try{const n=await(await fetch("guests.json")).json();return n&&n.admin&&n.admin.length>0?n.admin[0].password===e:(console.error("Error fetching or processing admin data from guests.json"),!1)}catch(t){return console.error("Error fetching guests.json:",t),!1}}showRsvpManager(){const e=document.querySelectorAll("div");for(const t of e)t!==this.rsvpListDiv&&(t.style.display="none");this.rsvpListDiv.style.display="block",this.submitButton.addEventListener("click",()=>{console.log("Admin submission")})}handleRsvp(){if(!this.guestNameInput.value.trim()||this.rsvpData.length>0)return;const t=this.collectRsvpData();t.rsvpStatus="Yes",this.rsvpData.push(t);const n=this.getSelectedTable();this.populateTable(t,n),this.clearGuestInput(),this.updateTotals(t);const s=document.querySelectorAll(".delete-checkbox:checked");s.length>0&&console.log("Selected guests for deletion:",s)}collectRsvpData(){const e=this.getSelectedType(),t=this.isAttendingChildrenChecked(),n=document.getElementById("dietary-requirements").value;return{guestName,guestType:e,attendingChildren:t,dietaryRequirements:n}}populateTable(e,t){const n=document.getElementById(`${t}-body`),s=document.createElement("tr"),o=e.rsvpStatus==="Yes"?"green":"gray";let l=e.rsvpDate;if(l){l instanceof Date||(l=new Date(l));const r=String(l.getDate()).padStart(2,"0"),a=String(l.getMonth()+1).padStart(2,"0"),g=l.getFullYear();l=`${r} ${a} ${g}`}s.innerHTML=`
      <td style="color: ${o}">${e.rsvpStatus?"Yes":"No"}</td>
      <td style="color: ${o}">${e.name||""}</td>
      <td style="color: ${o}">${e.type||""}</td>
      <td style="color: ${o}">${e.attendingChildren?"Yes":"No"}</td>
      <td style="color: ${o}">${e.children||""}</td>
      <td style="color: ${o}">${e.dietaryRequirements||""}</td>
      <td style="color: ${o}">${e.ceremony?"Yes":"No"}</td>
      <td style="color: ${o}">${e.reception?"Yes":"No"}</td>
      <td style="color: ${o}">${e.evening?"Yes":"No"}</td>
      <td style="color: ${o}">${e.email||""}</td>
      <td style="color: ${o}">${e.rsvpDate||""}</td> 
      <td><input type="checkbox" class="delete-checkbox"></td>
    `,n.appendChild(s),s.querySelector(".delete-checkbox").addEventListener("click",function(){this.parentNode.parentNode.querySelector("td:first-child").textContent.trim()==="Yes"&&window.confirm("Are you sure you want to delete this row?")&&this.parentNode.parentNode.remove()})}clearGuestInput(){this.guestNameInput.value=""}getSelectedTable(){return""}isAttendingChildrenChecked(){return document.getElementById("children-yes").checked}deleteRsvpEntry(e,t){const s=document.getElementById(`${t}-body`).querySelectorAll("tr");for(const o of s)if(o.querySelector("td").textContent===e.guestName){o.remove(),this.rsvpData=this.rsvpData.filter(l=>l.guestName!==e.guestName),this.updateTotals({...e,attendingChildren:-e.attendingChildren});break}}updateTotals(e){this.totalCounts.guests++,this.totalCounts.attendingChildren+=e.attendingChildren?1:0,document.getElementById("total-guests").textContent=this.totalCounts.guests,document.getElementById("total-attending-children").textContent=this.totalCounts.attendingChildren}}const d=document.getElementById("guest-name"),h=document.getElementById("guest-list"),b=document.getElementById("submit-button"),k=document.getElementById("allDay"),D=document.getElementById("evening"),B=document.getElementById("ceremony"),G=document.getElementById("children-checklist");k.style.display="none";D.style.display="none";B.style.display="none";G.style.display="none";let u=[];fetch("guests.json").then(i=>i.json()).then(i=>{u=i.allDay.concat(i.evening,i.ceremony);const e=new w;u.forEach(t=>e.populateTable(t,"rsvp-table"))}).catch(i=>{console.error("Error fetching guest list data:",i)});let c=0;d.addEventListener("keyup",function(i){const e=this.value.toLowerCase(),t=u.filter(n=>n.name.toLowerCase().includes(e));if(h.innerHTML="",e.length>=3&&t.length>0){const n=document.createElement("ul");n.classList.add("guest-list"),t.forEach(s=>{const o=document.createElement("li");o.textContent=s.name,o.addEventListener("click",function(){d.value=this.textContent,y()}),n.appendChild(o)}),h.appendChild(n)}else h.textContent=e.length<3?"Type at least 3 characters":"No matches found."});d.addEventListener("keydown",function(i){const e=i.keyCode,t=document.getElementById("suggestions");if(t){if(e===40)c++,m(c);else if(e===38)c--,m(c);else if(e===13){const n=t.querySelector("li.active");n&&(d.value=n.textContent,c=0,y())}}});function m(i){const t=document.getElementById("suggestions").querySelectorAll("li");t&&($(t),i>=0&&i<t.length&&t[i].classList.add("active"))}function $(i){i.forEach(e=>e.classList.remove("active"))}function y(){const i=document.getElementById("suggestions");i&&i.parentNode.removeChild(i)}b.addEventListener("click",function(){const i=d.value.trim();if(!i){alert("Please enter your name.");return}const e=new L(u);if(e.verifyGuest(i)){const t=e.getGuestType(i);e.showGuestInfo(t)}else alert("Sorry, guest not found.")});new p;
