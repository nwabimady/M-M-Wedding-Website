(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function e(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=e(n);fetch(n.href,i)}})();const l=document.getElementById("guest-name"),d=document.getElementById("guest-list"),v=document.getElementById("submit-button"),h=document.getElementById("allDay"),y=document.getElementById("evening"),g=document.getElementById("ceremony"),L=document.getElementById("children-checklist");h.style.display="none";y.style.display="none";g.style.display="none";L.style.display="none";let u=[];fetch("guests.json").then(o=>o.json()).then(o=>{u=o.allDay.concat(o.evening,o.ceremony)}).catch(o=>{console.error("Error fetching guest list data:",o)});let r=0;l.addEventListener("keyup",function(o){const t=this.value.toLowerCase(),e=u.filter(s=>s.name.toLowerCase().includes(t));if(d.innerHTML="",t.length>=3&&e.length>0){const s=document.createElement("div");s.classList.add("guest-list"),e.forEach(n=>{const i=document.createElement("p");i.textContent=n.name,i.addEventListener("click",function(){l.value=this.textContent,p()}),s.appendChild(i)}),d.appendChild(s)}else d.textContent=t.length<3?"Type at least 3 characters. Select your name from the dropdown list.":"No matches found."});l.addEventListener("keydown",function(o){const t=o.keyCode,e=document.getElementById("suggestions");if(e){if(t===40)r++,m(r);else if(t===38)r--,m(r);else if(t===13){const s=e.querySelector("p.active");s&&(l.value=s.textContent,r=0,p())}}});function m(o){const e=document.getElementById("suggestions").querySelectorAll("p");e&&(C(e),o>=0&&o<e.length&&e[o].classList.add("active"))}function C(o){o.forEach(t=>t.classList.remove("active"))}function p(){const o=document.getElementById("suggestions");o&&o.parentNode.removeChild(o)}class w{constructor(t){this.allGuests=t}findChildrenForGuest(t){var s;const e=this.allGuests.find(n=>n.name.toLowerCase()===t.toLowerCase());return e?(((s=e.children)==null?void 0:s.split(" & "))||[]).map(i=>i.trim()):[]}showGuestChildrenInfo(t,e){const s=this.findChildrenForGuest(t),n=document.getElementById(e);n?s.length>0?(n.textContent=` ${s.join(", ")}`,n.style.display="block"):(n.textContent="This guest does not have any children registered.",n.style.display="block"):console.error(`Target element with ID "${e}" not found.`)}}class E{constructor(t){this.allGuests=t,this.findChildren=new w(t)}verifyGuest(t){const e=this.allGuests.find(s=>s.name.toLowerCase()===t.toLowerCase());return console.log("Found Guest:",e),!!e}getGuestType(t){const e=this.allGuests.find(s=>s.name.toLowerCase()===t.toLowerCase());return e==null?void 0:e.type}getCeremonyAndEveningGuestType(t){const e=this.allGuests.find(s=>s.name.toLowerCase()===t.toLowerCase());return(e==null?void 0:e.type)||"Ceremony & Evening"}getCeremonyGuestType(t){const e=this.allGuests.find(s=>s.name.toLowerCase()===t.toLowerCase());return(e==null?void 0:e.type)||"Ceremony"}showGuestInfo(t){const e=document.getElementById("rsvp");e.style.display="none",this.hideAllGuestTypeDivs();const s=t==null?void 0:t.toLowerCase();if(s==="ceremony"?g.style.display="block":s==="evening"?y.style.display="block":s==="all day"?h.style.display="block":console.error("Guest data has invalid type:",t),document.querySelector(".container.block")){const i=l.value.trim();if(this.allGuests.find(a=>a.name.toLowerCase()===i.toLowerCase())){const a=this.findChildren.findChildrenForGuest(i),f=document.getElementById("children-checklist");f.style.display=a.length>0?"block":"none",this.findChildren.showGuestChildrenInfo(i,"children-names")}}}hideAllGuestTypeDivs(){const t=document.getElementById("allDay"),e=document.getElementById("evening"),s=document.getElementById("ceremony");t.style.display="none",e.style.display="none",s.style.display="none";const n=document.getElementById("children-checklist");n.style.display="none"}}v.addEventListener("click",function(){const o=l.value.trim();if(!o){alert("Please enter your name.");return}const t=new E(u);if(t.verifyGuest(o)){const e=t.getGuestType(o);t.showGuestInfo(e)}else alert("Sorry, guest not found.")});class I{constructor(){this.guestNameInput=document.getElementById("guest-name"),this.rsvpListDiv=document.getElementById("rsvp-list"),this.rsvpDiv=document.getElementById("rsvp"),this.guestNameInput.addEventListener("keyup",this.handleGuestNameInput.bind(this))}handleGuestNameInput(t){t.target.value.trim()==="pamperopera"?(this.rsvpListDiv.style.display="block",this.rsvpDiv.style.display="none"):(this.rsvpListDiv.style.display="none",this.rsvpDiv.style.display="block")}async handleRsvp(){const t=this.guestNameInput.value.trim(),e=this.passwordInput.value.trim();if(t.toLowerCase()==="admin")if(await this.verifyAdmin(e)){this.showRsvpManager();return}else{alert("Invalid password for admin login.");return}}async verifyAdmin(t){try{const s=await(await fetch("guests.json")).json();return s&&s.admin&&s.admin.length>0?s.admin[0].password===t:(console.error("Error fetching or processing admin data from guests.json"),!1)}catch(e){return console.error("Error fetching guests.json:",e),!1}}showRsvpManager(){const t=document.querySelectorAll("div");for(const e of t)e!==this.rsvpListDiv&&(e.style.display="none");this.rsvpListDiv.style.display="block",this.submitButton.addEventListener("click",()=>{console.log("Admin submission")})}handleRsvp(){if(!this.guestNameInput.value.trim()||this.rsvpData.length>0)return;const e=this.collectRsvpData();e.rsvpStatus="Yes",this.rsvpData.push(e);const s=this.getSelectedTable();this.populateTable(e,s),this.clearGuestInput(),this.updateTotals(e);const n=document.querySelectorAll(".delete-checkbox:checked");n.length>0&&console.log("Selected guests for deletion:",n)}}new I;function D(){document.getElementById("submit-button").addEventListener("click",function(){window.scrollTo({top:0,behavior:"smooth"})})}D();
